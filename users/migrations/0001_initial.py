# Generated by Django 5.2.8 on 2025-11-28 14:30

import django.db.models.deletion
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='Cart',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('status', models.CharField(choices=[('ACTIVE', 'Active'), ('ABANDONED', 'Abandoned'), ('CONVERTED', 'Converted')], default='ACTIVE', max_length=20)),
                ('total_amount', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('total_items', models.IntegerField(default=0)),
                ('ip_address', models.CharField(max_length=45)),
                ('user_agent', models.CharField(blank=True, max_length=255, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('expires_at', models.DateTimeField(blank=True, null=True)),
                ('converted_at', models.DateTimeField(blank=True, null=True)),
            ],
        ),
        migrations.CreateModel(
            name='Category',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=25, unique=True)),
                ('slug', models.CharField(max_length=25, unique=True)),
                ('description', models.TextField()),
                ('icon', models.CharField(max_length=25)),
                ('sort_order', models.CharField(max_length=20)),
                ('status', models.CharField(choices=[('ACTIVE', 'Active'), ('INACTIVe', 'Inactive')], max_length=10)),
                ('meta_title', models.CharField(max_length=20)),
                ('meta_description', models.TextField()),
            ],
        ),
        migrations.CreateModel(
            name='PaymentGateway',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=64, unique=True)),
                ('slug', models.CharField(max_length=64, unique=True)),
                ('type', models.CharField(choices=[('CRYPTO', 'Crypto'), ('CARD', 'Card'), ('BANK_TRANSFER', 'Bank_Transfer'), ('OTHER', 'Other')], default='CARD', max_length=20)),
                ('credentials', models.JSONField()),
                ('min_amount', models.FloatField()),
                ('max_amount', models.FloatField()),
                ('fee_type', models.CharField(choices=[('PERCENTAGE', 'Percentage'), ('FIXED', 'Fixed'), ('BOTH', 'Both')], default='PERCENTAGE', max_length=20)),
                ('fee_percentage', models.FloatField(blank=True, null=True)),
                ('fee_fixed', models.FloatField(blank=True, null=True)),
                ('icon', models.CharField(max_length=20)),
                ('description', models.TextField(blank=True, null=True)),
                ('sort_order', models.CharField(max_length=20)),
                ('status', models.CharField(choices=[('ACTIVE', 'Active'), ('INACTIVE', 'Inactive'), ('MAINTENANCE', 'Maintenance')], default='ACTIVE', max_length=20)),
                ('is_default', models.BooleanField(default=False)),
                ('supported_currencies', models.CharField(max_length=64)),
            ],
        ),
        migrations.CreateModel(
            name='Session',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('ip_address', models.CharField(max_length=20)),
                ('user_agent', models.CharField(blank=True, default='Chrome', max_length=30, null=True)),
                ('payload', models.CharField(blank=True, max_length=20, null=True)),
                ('last_activity', models.DateTimeField(auto_now_add=True)),
            ],
        ),
        migrations.CreateModel(
            name='Supplier',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('last_sync_at', models.DateTimeField(auto_created=True, auto_now_add=True)),
                ('first_name', models.CharField(max_length=25)),
                ('last_name', models.CharField(max_length=25)),
                ('api_url', models.TextField()),
                ('api_key', models.CharField(max_length=64)),
                ('api_type', models.CharField(choices=[('V1', 'v1'), ('V2', 'v2'), ('JUSTANOTHERPANEL', 'justanotherpanel')], max_length=20)),
                ('currency', models.CharField(max_length=20)),
                ('rate_multipler', models.CharField(max_length=20)),
                ('status', models.CharField(choices=[('ACTIVE', 'Active'), ('INACTIVE', 'inactive'), ('MAINTENANCE', 'Maintenance')], max_length=20)),
                ('min_order_amount', models.IntegerField()),
                ('max_order_amount', models.IntegerField()),
                ('sync_enabled', models.BooleanField(default=False)),
                ('description', models.TextField(blank=True, null=True)),
                ('support_url', models.CharField(max_length=50)),
                ('terms_url', models.CharField(blank=True, max_length=20, null=True)),
            ],
        ),
        migrations.CreateModel(
            name='User',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('first_name', models.CharField(max_length=25)),
                ('last_name', models.CharField(max_length=25)),
                ('email', models.EmailField(max_length=254, unique=True)),
                ('password', models.CharField(max_length=128)),
                ('role', models.CharField(choices=[('USER', 'User'), ('ADMIN', 'Admin'), ('RESELLER', 'Reseller')], default='USER', max_length=10)),
                ('status', models.CharField(choices=[('ACTIVE', 'Active'), ('SUSPENDED', 'Suspended'), ('BANNED', 'Banned')], default='ACTIVE', max_length=10)),
                ('api_key', models.TextField(blank=True)),
                ('api_enabled', models.BooleanField(default=True)),
                ('phone_number', models.CharField(max_length=15)),
                ('country', models.CharField(default='RU', max_length=20)),
                ('timezone', models.CharField(default='UTC+5', max_length=20)),
                ('preferences', models.JSONField(default=dict)),
                ('last_login_at', models.DateTimeField(auto_now_add=True)),
                ('last_login_api', models.CharField(blank=True, max_length=20)),
            ],
        ),
        migrations.CreateModel(
            name='Service',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=40, unique=True)),
                ('photo', models.ImageField(blank=True, null=True, upload_to='photos/')),
                ('slug', models.CharField(db_index=True, max_length=40, unique=True)),
                ('description', models.TextField(blank=True, null=True)),
                ('supplier_service_id', models.IntegerField()),
                ('price_per_100', models.DecimalField(decimal_places=2, max_digits=10)),
                ('supplier_price_per_100', models.DecimalField(decimal_places=2, max_digits=10)),
                ('min_quantity', models.IntegerField(default=10)),
                ('max_quantity', models.IntegerField(default=100000)),
                ('average_time', models.CharField(default='1-2 hours', max_length=50)),
                ('refill_enabled', models.BooleanField(default=False)),
                ('cancel_enabled', models.BooleanField(default=True)),
                ('sort_order', models.IntegerField(db_index=True, default=0)),
                ('is_featured', models.BooleanField(db_index=True, default=False)),
                ('status', models.CharField(default='ACTIVE', max_length=20)),
                ('meta_title', models.CharField(max_length=100)),
                ('meta_description', models.TextField(blank=True, null=True)),
                ('total_orders', models.IntegerField(default=0)),
                ('total_completed', models.IntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('category_id', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='services', to='users.category')),
                ('supplier_id', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='services', to='users.supplier')),
            ],
            options={
                'ordering': ['sort_order', 'name'],
            },
        ),
        migrations.CreateModel(
            name='CartItem',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('link', models.URLField(max_length=500)),
                ('quantity', models.IntegerField()),
                ('price_per_100', models.DecimalField(decimal_places=2, max_digits=10)),
                ('total_amount', models.DecimalField(decimal_places=2, max_digits=10)),
                ('notes', models.TextField(blank=True, null=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('cart_id', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='items', to='users.cart')),
                ('service_id', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='users.service')),
            ],
        ),
        migrations.AddField(
            model_name='cart',
            name='session_id',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='users.session'),
        ),
        migrations.AddField(
            model_name='session',
            name='user_id',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='users.user'),
        ),
        migrations.CreateModel(
            name='Payment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('test', models.CharField(blank=True, default='asd', null=True)),
                ('transaction_id', models.CharField(db_index=True, max_length=100, unique=True)),
                ('payment_id', models.CharField(blank=True, max_length=100, null=True)),
                ('amount', models.DecimalField(decimal_places=2, max_digits=10)),
                ('fee', models.DecimalField(decimal_places=2, default=0, max_digits=10)),
                ('total_amount', models.DecimalField(decimal_places=2, max_digits=10)),
                ('currency', models.CharField(default='USD', max_length=10)),
                ('crypto_currency', models.CharField(blank=True, max_length=20, null=True)),
                ('crypto_amount', models.DecimalField(blank=True, decimal_places=8, max_digits=20, null=True)),
                ('payment_url', models.URLField(blank=True, max_length=500, null=True)),
                ('status', models.CharField(choices=[('PENDING', 'Pending'), ('WAITING', 'Waiting for Payment'), ('CONFIRMING', 'Confirming'), ('COMPLETED', 'Completed'), ('FAILED', 'Failed'), ('CANCELLED', 'Cancelled'), ('REFUNDED', 'Refunded'), ('EXPIRED', 'Expired')], default='PENDING', max_length=20)),
                ('payment_data', models.JSONField(default=dict)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('expires_at', models.DateTimeField(blank=True, null=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('gateway', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to='users.paymentgateway')),
                ('user_id', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='payments', to='users.user')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='PasswordResetToken',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_created=True, auto_now_add=True)),
                ('token', models.TextField()),
                ('email', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='users.user', to_field='email')),
            ],
        ),
        migrations.CreateModel(
            name='Order',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('order_number', models.CharField(db_index=True, max_length=50, unique=True)),
                ('supplier_order_id', models.CharField(blank=True, max_length=50, null=True)),
                ('link', models.URLField(max_length=500)),
                ('quantity', models.IntegerField()),
                ('price_paid', models.DecimalField(decimal_places=2, max_digits=10)),
                ('profit', models.DecimalField(decimal_places=2, max_digits=10)),
                ('status', models.CharField(choices=[('PENDING', 'Pending'), ('PROCESSING', 'Processing'), ('IN_PROGRESS', 'In Progress'), ('COMPLETED', 'Completed'), ('PARTIAL', 'Partial'), ('CANCELLED', 'Cancelled'), ('REFUNDED', 'Refunded'), ('FAILED', 'Failed')], default='PENDING', max_length=20)),
                ('start_count', models.IntegerField(default=0)),
                ('remains', models.IntegerField(default=0)),
                ('customer_note', models.TextField(blank=True, null=True)),
                ('admin_note', models.TextField(blank=True, null=True)),
                ('submitted_at', models.DateTimeField(auto_now_add=True)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('cancelled_at', models.DateTimeField(blank=True, null=True)),
                ('refunded_at', models.DateTimeField(blank=True, null=True)),
                ('service_id', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='users.service')),
                ('user_id', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='orders', to='users.user')),
            ],
            options={
                'ordering': ['-submitted_at'],
            },
        ),
        migrations.AddField(
            model_name='cart',
            name='user_id',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='carts', to='users.user'),
        ),
        migrations.AddIndex(
            model_name='service',
            index=models.Index(fields=['slug'], name='users_servi_slug_f1008b_idx'),
        ),
        migrations.AddIndex(
            model_name='service',
            index=models.Index(fields=['is_featured', 'status'], name='users_servi_is_feat_61793f_idx'),
        ),
        migrations.AddIndex(
            model_name='service',
            index=models.Index(fields=['category_id', 'status'], name='users_servi_categor_0945e2_idx'),
        ),
        migrations.AddIndex(
            model_name='payment',
            index=models.Index(fields=['transaction_id'], name='users_payme_transac_3ba15d_idx'),
        ),
        migrations.AddIndex(
            model_name='payment',
            index=models.Index(fields=['payment_id'], name='users_payme_payment_0485c0_idx'),
        ),
        migrations.AddIndex(
            model_name='payment',
            index=models.Index(fields=['user_id', 'status'], name='users_payme_user_id_26c4cd_idx'),
        ),
        migrations.AddIndex(
            model_name='order',
            index=models.Index(fields=['order_number'], name='users_order_order_n_e778ad_idx'),
        ),
        migrations.AddIndex(
            model_name='order',
            index=models.Index(fields=['user_id', 'status'], name='users_order_user_id_839f51_idx'),
        ),
    ]
